{% extends "document.html" %}

{% block body %}
<div class="col-md-12">
    {% include 'parts/flash.html' %}
    {% include 'employee/employee-header.html' %}
    {% include 'employee/employee-profile-photo.html' %}
    {% include 'employee/employee-view-tabs.html' %}
    <div class="tab-content p-3 pt-4 min-height-500">
        <div class="d-flex align-items-center">
            <h1 class="h4 mr-3 mb-0">E-201 Documents</h1>
            <a href="/employee/{{employee._id}}/document/create" class="btn btn-sm btn-light">Add Document</a>
        </div>
        <hr>
        <div class="d-flex align-items-center">
            <div class="text-center p-2 m-2" style="border: 2px solid #ccc; margin: 2px; max-width: 150px">
                <a href="/employee/{{employee._id}}/document/pds">
                    <svg style="width:64px;height:64px" viewBox="0 0 24 24">
                        <path fill="currentColor" d="M21.17 3.25Q21.5 3.25 21.76 3.5 22 3.74 22 4.08V19.92Q22 20.26 21.76 20.5 21.5 20.75 21.17 20.75H7.83Q7.5 20.75 7.24 20.5 7 20.26 7 19.92V17H2.83Q2.5 17 2.24 16.76 2 16.5 2 16.17V7.83Q2 7.5 2.24 7.24 2.5 7 2.83 7H7V4.08Q7 3.74 7.24 3.5 7.5 3.25 7.83 3.25M7 13.06L8.18 15.28H9.97L8 12.06L9.93 8.89H8.22L7.13 10.9L7.09 10.96L7.06 11.03Q6.8 10.5 6.5 9.96 6.25 9.43 5.97 8.89H4.16L6.05 12.08L4 15.28H5.78M13.88 19.5V17H8.25V19.5M13.88 15.75V12.63H12V15.75M13.88 11.38V8.25H12V11.38M13.88 7V4.5H8.25V7M20.75 19.5V17H15.13V19.5M20.75 15.75V12.63H15.13V15.75M20.75 11.38V8.25H15.13V11.38M20.75 7V4.5H15.13V7Z" />
                    </svg>
                </a>
                <p>CS Form No. 212 Personal Data Sheet</p>
                <div><a href="/employee/{{employee._id}}/document/pds" class="btn btn-sm btn-primary">Download</a></div>
            </div>
           
            {% for document in employee.documents %}
                <div class="text-center p-2 m-2" style="border: 2px solid #ccc; margin: 2px; max-width: 150px">
                    <a href="{{document.key|view_url}}">
                        <img src="{{document.key|s3_url('small')}}" alt="">
                    </a>
                    <p>{{document.name}}</p>
                    <div>
                        <a href="{{document.key|s3_url}}" class="btn btn-sm btn-light">Download</a>
                        <a href="/employee/{{employee._id}}/document/{{document._id}}/delete" class="btn btn-sm btn-danger">X</a>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
{% block scripts %}
{{ super() }}
<script>
    var vApp = new Vue({
        el: '#vApp',
        delimiters: ["${", "}"],
        mixins: [
            window.vuelidate.validationMixin,
            window.vuelidateExtendMixin,
        ],
        data: {
        },
        validations: {
        },
        methods: {
            onSubmit: function(){
                var me = this;
                me.$v.$touch()
                if (me.$v.$error) {
                    alert('Please correct the errors to continue.')
                } else {
                    me.$nextTick(function() {
                        me.$refs.form.submit();
                    });
                }
            }
        }
    });
</script>
{% endblock %}

